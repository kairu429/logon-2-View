<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Web2 - メッセージ表示</title>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">
<style>
  body { background-color: #f3f4f6; font-family: 'Segoe UI', sans-serif; }
  #display { 
    background-color: white; 
    border-radius: 1rem; 
    padding: 2rem; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-size: 2rem;
    text-align: center;
    max-width: 80%;
  }
</style>
<script>
const firebaseConfig = {
  databaseURL: "https://hack-script-e899a-default-rtdb.firebaseio.com/"
};
firebase.initializeApp(firebaseConfig);
const database = firebase.database();
const display = document.getElementById('display');

function showMessage(message, key) {
  display.innerText = message;
  setTimeout(() => {
    database.ref('messages/' + key).remove();
    display.innerText = '';
  }, 60000);
}

// 新しいメッセージが追加されたら表示
database.ref('messages').orderByChild('timestamp').limitToLast(1)
.on('child_added', snapshot => {
  const msg = snapshot.val();
  showMessage(msg.content, snapshot.key);
});
</script>
</head>
<body class="flex items-center justify-center h-screen">
  <div id="display"></div>
</body>
</html>
